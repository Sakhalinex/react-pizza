(this["webpackJsonpreact-pizza"]=this["webpackJsonpreact-pizza"]||[]).push([[0],{31:function(e,t,a){e.exports=a.p+"static/media/pizza-logo.f3327011.svg"},33:function(e,t,a){e.exports=a.p+"static/media/empty-cart.ceb2faf0.png"},34:function(e,t,a){e.exports=a(65)},41:function(e,t,a){},63:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(16),o=a.n(r),l=a(10),i=a(4),s=a(12),m=a(30),d=a(1);const p={items:{},totalPrice:0,totalCount:0},u=e=>e.reduce((e,t)=>t.price+e,0),E=(e,t)=>Object.values(e).reduce((e,a)=>e+((e,t)=>{const[a,...n]=t.split(".");return n.reduce((e,t)=>e[t],e[a])})(a,t),0);var g=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_PIZZA_CART":{const a=e.items[t.payload.id]?[...e.items[t.payload.id].items,t.payload]:[t.payload],n=Object(d.a)(Object(d.a)({},e.items),{},{[t.payload.id]:{items:a,totalPrice:u(a)}}),c=E(n,"items.length"),r=E(n,"totalPrice");return Object(d.a)(Object(d.a)({},e),{},{items:n,totalCount:c,totalPrice:r})}case"REMOVE_CART_ITEM":{const a=Object(d.a)({},e.items),n=a[t.payload].totalPrice,c=a[t.payload].items.length;return delete a[t.payload],Object(d.a)(Object(d.a)({},e),{},{items:a,totalPrice:e.totalPrice-n,totalCount:e.totalCount-c})}case"PLUS_CART_ITEM":{const a=[...e.items[t.payload].items,e.items[t.payload].items[0]],n=Object(d.a)(Object(d.a)({},e.items),{},{[t.payload]:{items:a,totalPrice:u(a)}}),c=E(n,"items.length"),r=E(n,"totalPrice");return Object(d.a)(Object(d.a)({},e),{},{items:n,totalCount:c,totalPrice:r})}case"MINUS_CART_ITEM":{const a=e.items[t.payload].items,n=a.length>1?e.items[t.payload].items.slice(1):a,c=Object(d.a)(Object(d.a)({},e.items),{},{[t.payload]:{items:n,totalPrice:u(n)}}),r=E(c,"items.length"),o=E(c,"totalPrice");return Object(d.a)(Object(d.a)({},e),{},{items:c,totalCount:r,totalPrice:o})}case"CLEAR_CART":return{totalPrice:0,totalCount:0,items:{}};case"SET_CART_FROM_SERVER":return Object(d.a)(Object(d.a)({},e),{},{items:t.payload,totalCount:E(t.payload,"items.length"),totalPrice:E(t.payload,"totalPrice")});default:return e}};const b={category:null,sortBy:{type:"rating",order:"desc"}};var y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;return"SET_SORT_BY"===t.type?Object(d.a)(Object(d.a)({},e),{},{sortBy:t.payload}):"SET_CATEGORY"===t.type?Object(d.a)(Object(d.a)({},e),{},{category:t.payload}):e};const f={orders:[]};var h=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_ORDER":return Object(d.a)(Object(d.a)({},e),{},{orders:[t.payload,...e.orders]});case"SET_ORDERS":return Object(d.a)(Object(d.a)({},e),{},{orders:t.payload});default:return e}};const v={items:[],isLoaded:!1};var C=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PIZZAS":return Object(d.a)(Object(d.a)({},e),{},{items:t.payload,isLoaded:!0});case"SET_LOADED":return Object(d.a)(Object(d.a)({},e),{},{isLoaded:t.payload});default:return e}};const w={appliedPromocode:null};var O=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"APPLY_PROMOCODE":return Object(d.a)(Object(d.a)({},e),{},{appliedPromocode:t.payload});case"REMOVE_PROMOCODE":return Object(d.a)(Object(d.a)({},e),{},{appliedPromocode:null});default:return e}};const k={reviews:[]};var _=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_REVIEW":return Object(d.a)(Object(d.a)({},e),{},{reviews:[t.payload,...e.reviews]});case"SET_REVIEWS":return Object(d.a)(Object(d.a)({},e),{},{reviews:t.payload});default:return e}};var x=Object(s.b)({filters:y,pizzas:C,cart:g,orders:h,reviews:_,promocodes:O});const j=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.c;var S=Object(s.d)(x,j(Object(s.a)(m.a))),z=(a(41),a(5)),N=a(15),L=a.n(N);var R=e=>{let{onClick:t,className:a,outline:n,children:r}=e;return c.a.createElement("button",{onClick:t,className:L()("button",a,{"button--outline":n})},r)};var P=e=>{let{id:t,name:a,type:n,size:r,totalPrice:o,totalCount:l,cartKey:i,onRemove:s,onMinus:m,onPlus:d,imageUrl:p}=e;return c.a.createElement("div",{className:"cart__item"},c.a.createElement("div",{className:"cart__item-img"},c.a.createElement("img",{className:"pizza-block__image",src:"\u041c\u0430\u0440\u0433\u0430\u0440\u0438\u0442\u0430"==a||"\u041f\u0435\u043f\u043f\u0435\u0440\u043e\u043d\u0438"===a?"https://media.dodostatic.net/image/r:584x584/11ee7d6105ef6690b86fbde6150b5b0c.avif":p,alt:"Pizza"})),c.a.createElement("div",{className:"cart__item-info"},c.a.createElement("h3",null,a),c.a.createElement("p",null,n," \u0442\u0435\u0441\u0442\u0430, ",r," \u0441\u043c.")),c.a.createElement("div",{className:"cart__item-count"},c.a.createElement("div",{onClick:()=>{m()},className:"button button--outline button--circle cart__item-count-minus"},c.a.createElement("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",xmlns:"http://www.w3.org/2000/svg"},c.a.createElement("path",{d:"M5.92001 3.84V5.76V8.64C5.92001 9.17016 5.49017 9.6 4.96001 9.6C4.42985 9.6 4.00001 9.17016 4.00001 8.64L4 5.76L4.00001 3.84V0.96C4.00001 0.42984 4.42985 0 4.96001 0C5.49017 0 5.92001 0.42984 5.92001 0.96V3.84Z",fill:"#EB5A1E"}),c.a.createElement("path",{d:"M5.75998 5.92001L3.83998 5.92001L0.959977 5.92001C0.429817 5.92001 -2.29533e-05 5.49017 -2.29301e-05 4.96001C-2.2907e-05 4.42985 0.429817 4.00001 0.959977 4.00001L3.83998 4L5.75998 4.00001L8.63998 4.00001C9.17014 4.00001 9.59998 4.42985 9.59998 4.96001C9.59998 5.49017 9.17014 5.92001 8.63998 5.92001L5.75998 5.92001Z",fill:"#EB5A1E"}))),c.a.createElement("b",null,l),c.a.createElement("div",{onClick:()=>{d()},className:"button button--outline button--circle cart__item-count-plus"},c.a.createElement("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",xmlns:"http://www.w3.org/2000/svg"},c.a.createElement("path",{d:"M5.92001 3.84V5.76V8.64C5.92001 9.17016 5.49017 9.6 4.96001 9.6C4.42985 9.6 4.00001 9.17016 4.00001 8.64L4 5.76L4.00001 3.84V0.96C4.00001 0.42984 4.42985 0 4.96001 0C5.49017 0 5.92001 0.42984 5.92001 0.96V3.84Z",fill:"#EB5A1E"}),c.a.createElement("path",{d:"M5.75998 5.92001L3.83998 5.92001L0.959977 5.92001C0.429817 5.92001 -2.29533e-05 5.49017 -2.29301e-05 4.96001C-2.2907e-05 4.42985 0.429817 4.00001 0.959977 4.00001L3.83998 4L5.75998 4.00001L8.63998 4.00001C9.17014 4.00001 9.59998 4.42985 9.59998 4.96001C9.59998 5.49017 9.17014 5.92001 8.63998 5.92001L5.75998 5.92001Z",fill:"#EB5A1E"})))),c.a.createElement("div",{className:"cart__item-price"},c.a.createElement("b",null,o," \u20bd")),c.a.createElement("div",{className:"cart__item-remove"},c.a.createElement(R,{onClick:()=>{s()},className:"button--circle",outline:!0},c.a.createElement("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",xmlns:"http://www.w3.org/2000/svg"},c.a.createElement("path",{d:"M5.92001 3.84V5.76V8.64C5.92001 9.17016 5.49017 9.6 4.96001 9.6C4.42985 9.6 4.00001 9.17016 4.00001 8.64L4 5.76L4.00001 3.84V0.96C4.00001 0.42984 4.42985 0 4.96001 0C5.49017 0 5.92001 0.42984 5.92001 0.96V3.84Z",fill:"#EB5A1E"}),c.a.createElement("path",{d:"M5.75998 5.92001L3.83998 5.92001L0.959977 5.92001C0.429817 5.92001 -2.29533e-05 5.49017 -2.29301e-05 4.96001C-2.2907e-05 4.42985 0.429817 4.00001 0.959977 4.00001L3.83998 4L5.75998 4.00001L8.63998 4.00001C9.17014 4.00001 9.59998 4.42985 9.59998 4.96001C9.59998 5.49017 9.17014 5.92001 8.63998 5.92001L5.75998 5.92001Z",fill:"#EB5A1E"})))))};const M=c.a.memo((function(e){let{activeCategory:t,items:a,onClickCategory:n}=e;return c.a.createElement("div",{className:"categories"},c.a.createElement("ul",null,c.a.createElement("li",{className:null===t?"active":"",onClick:()=>n(null)},"\u0412\u0441\u0435"),a&&a.map((e,a)=>c.a.createElement("li",{className:t===a?"active":"",onClick:()=>n(a),key:"".concat(e,"_").concat(a)},e))))}));M.defaultProps={activeCategory:null,items:[]};var T=M,A=a(31),D=a.n(A),B=a(3),V=a.n(B);const I="https://680743a9e81df7060eb96fec.mockapi.io/db/cart",W=e=>"".concat(e.id,"_").concat(e.size,"_").concat(e.type),Z=()=>async e=>{e({type:"CLEAR_CART"});const{data:t}=await V.a.get(I);await Promise.all(t.map(e=>V.a.delete("".concat(I,"/").concat(e.id))))};var H=()=>{const e=Object(i.b)(),{totalPrice:t,totalCount:a}=Object(i.c)(e=>e.cart);return c.a.useEffect(()=>{e(async e=>{const{data:t}=await V.a.get(I),a={};t.forEach(e=>{const t=e.cartKey;a[t]={items:Array(e.count).fill({id:e.pizzaId,name:e.name,imageUrl:e.imageUrl,price:e.price,size:e.size,type:e.type,cartKey:t}),totalPrice:e.price*e.count}}),e((e=>({type:"SET_CART_FROM_SERVER",payload:e}))(a))})},[e]),c.a.createElement("div",{className:"header"},c.a.createElement("div",{className:"container"},c.a.createElement(l.b,{to:"/"},c.a.createElement("div",{className:"header__logo"},c.a.createElement("img",{width:"38",src:D.a,alt:"Pizza logo"}),c.a.createElement("div",null,c.a.createElement("h1",null,"React Pizza"),c.a.createElement("p",null,"\u0441\u0430\u043c\u0430\u044f \u0432\u043a\u0443\u0441\u043d\u0430\u044f \u043f\u0438\u0446\u0446\u0430 \u0432\u043e \u0432\u0441\u0435\u043b\u0435\u043d\u043d\u043e\u0439")))),c.a.createElement("div",{className:"header__cart",style:{display:"flex",alignItems:"center",gap:16}},c.a.createElement(l.b,{to:"/orders"},c.a.createElement(R,{className:"button--orders",outline:!0,onClick:void 0},c.a.createElement("span",{style:{display:"flex",alignItems:"center",gap:6,color:"#ff9800",fontWeight:600}},c.a.createElement("svg",{width:"20",height:"20",fill:"none",viewBox:"0 0 20 20"},c.a.createElement("path",{d:"M5 2.5A2.5 2.5 0 0 0 2.5 5v10A2.5 2.5 0 0 0 5 17.5h10A2.5 2.5 0 0 0 17.5 15V5A2.5 2.5 0 0 0 15 2.5H5Zm0 1.5h10A1 1 0 0 1 16 5v10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1Zm2.5 2A.5.5 0 0 0 7 6.5v5a.5.5 0 0 0 .146.354l2.5 2.5a.5.5 0 0 0 .708-.708L8 11.293V6.5A.5.5 0 0 0 7.5 6Zm5 0a.5.5 0 0 1 .5.5v5a.5.5 0 0 1-.146.354l-2.5 2.5a.5.5 0 1 1-.708-.708L12 11.293V6.5a.5.5 0 0 1 .5-.5Z",fill:"#ff9800"})),c.a.createElement("span",null,"\u041c\u043e\u0438 \u0437\u0430\u043a\u0430\u0437\u044b")))),c.a.createElement(l.b,{to:"/cart"},c.a.createElement(R,{className:"button--cart",onClick:void 0,outline:!1},c.a.createElement("span",null,t," \u20bd"),c.a.createElement("div",{className:"button__delimiter"}),c.a.createElement("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},c.a.createElement("path",{d:"M6.33333 16.3333C7.06971 16.3333 7.66667 15.7364 7.66667 15C7.66667 14.2636 7.06971 13.6667 6.33333 13.6667C5.59695 13.6667 5 14.2636 5 15C5 15.7364 5.59695 16.3333 6.33333 16.3333Z",stroke:"white",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"}),c.a.createElement("path",{d:"M14.3333 16.3333C15.0697 16.3333 15.6667 15.7364 15.6667 15C15.6667 14.2636 15.0697 13.6667 14.3333 13.6667C13.597 13.6667 13 14.2636 13 15C13 15.7364 13.597 16.3333 14.3333 16.3333Z",stroke:"white",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"}),c.a.createElement("path",{d:"M4.78002 4.99999H16.3334L15.2134 10.5933C15.1524 10.9003 14.9854 11.176 14.7417 11.3722C14.4979 11.5684 14.1929 11.6727 13.88 11.6667H6.83335C6.50781 11.6694 6.1925 11.553 5.94689 11.3393C5.70128 11.1256 5.54233 10.8295 5.50002 10.5067L4.48669 2.82666C4.44466 2.50615 4.28764 2.21182 4.04482 1.99844C3.80201 1.78505 3.48994 1.66715 3.16669 1.66666H1.66669",stroke:"white",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"})),c.a.createElement("span",null,a))))))};const U="https://686750c9e3fefb261ede4439.mockapi.io/db2/reviews";a(63);var K=e=>{let{isOpen:t,onClose:a,onSubmit:r,pizzaName:o,reviews:l=[]}=e;const[i,s]=Object(n.useState)(0),[m,d]=Object(n.useState)(""),[p,u]=Object(n.useState)("");return t?c.a.createElement("div",{className:"review-modal-overlay",onClick:a},c.a.createElement("div",{className:"review-modal",onClick:e=>e.stopPropagation()},c.a.createElement("div",{className:"review-modal__header"},c.a.createElement("h3",null,"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043e\u0442\u0437\u044b\u0432"),c.a.createElement("button",{className:"review-modal__close",onClick:a},"\xd7")),c.a.createElement("div",{className:"review-modal__content"},c.a.createElement("p",{className:"review-modal__pizza-name"},o),c.a.createElement("div",{className:"review-modal__rating"},c.a.createElement("p",null,"\u0412\u0430\u0448\u0430 \u043e\u0446\u0435\u043d\u043a\u0430:"),c.a.createElement("div",{className:"stars"},[1,2,3,4,5].map(e=>c.a.createElement("button",{key:e,className:"star ".concat(e<=i?"star--active":""),onClick:()=>s(e)},"\u2605"))),c.a.createElement("p",{className:"rating-text"},i>0?"".concat(i," \u0438\u0437 5"):"\u041f\u043e\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u043e\u0446\u0435\u043d\u043a\u0443")),c.a.createElement("form",{onSubmit:e=>{e.preventDefault(),0!==i?(r({rating:i,comment:m,author:p.trim()||"\u0410\u043d\u043e\u043d\u0438\u043c"}),s(0),d(""),u(""),a()):alert("\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u043e\u0446\u0435\u043d\u043a\u0443")}},c.a.createElement("input",{type:"text",placeholder:"\u0412\u0430\u0448\u0435 \u0438\u043c\u044f (\u043d\u0435\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e)",value:p,onChange:e=>u(e.target.value),style:{width:"100%",marginBottom:10,padding:"10px 14px",borderRadius:8,border:"1px solid #eee",fontSize:16}}),c.a.createElement("textarea",{placeholder:"\u041d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u0432\u0430\u0448 \u043e\u0442\u0437\u044b\u0432 (\u043d\u0435\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e)",value:m,onChange:e=>d(e.target.value),rows:4}),c.a.createElement("div",{className:"review-modal__actions"},c.a.createElement("button",{type:"button",onClick:a,className:"btn-secondary"},"\u041e\u0442\u043c\u0435\u043d\u0430"),c.a.createElement("button",{type:"submit",className:"btn-primary"},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"))),c.a.createElement("hr",{style:{margin:"24px 0 16px 0",border:0,borderTop:"1px solid #eee"}}),c.a.createElement("h4",{style:{color:"#ff9800",margin:"0 0 12px 0"}},"\u041e\u0442\u0437\u044b\u0432\u044b:"),0===l.length?c.a.createElement("div",{style:{color:"#999",fontSize:15}},"\u041f\u043e\u043a\u0430 \u043d\u0435\u0442 \u043e\u0442\u0437\u044b\u0432\u043e\u0432"):c.a.createElement("div",{style:{maxHeight:220,overflowY:"auto",display:"flex",flexDirection:"column",gap:10}},l.map((e,t)=>c.a.createElement("div",{key:e.id||t,style:{background:"#faf8f6",borderRadius:8,padding:10}},c.a.createElement("div",{style:{color:"#ffc107",fontWeight:600,fontSize:15}},"\u2605 ",e.rating),c.a.createElement("div",{style:{color:"#333",fontSize:15,marginTop:2}},c.a.createElement("b",null,e.author||"\u0410\u043d\u043e\u043d\u0438\u043c",":")," ",e.comment),c.a.createElement("div",{style:{color:"#bbb",fontSize:12,marginTop:4}},e.date&&new Date(e.date).toLocaleString("ru-RU")))))))):null};function Y(e){let{id:t,name:a,imageUrl:n,price:r,types:o,sizes:l,onClickAddPizza:s,addedCount:m}=e;const p=["\u0442\u043e\u043d\u043a\u043e\u0435","\u0442\u0440\u0430\u0434\u0438\u0446\u0438\u043e\u043d\u043d\u043e\u0435"],u=[26,30,40],[E,g]=c.a.useState(o[0]),[b,y]=c.a.useState(0),[f,h]=c.a.useState(!1),v=Object(i.b)(),{reviews:C}=Object(i.c)(e=>e.reviews);c.a.useEffect(()=>{v(async e=>{try{const{data:t}=await V.a.get(U);e({type:"SET_REVIEWS",payload:t})}catch(t){console.error("Error fetching reviews:",t)}})},[v]);const w=C.filter(e=>e.pizzaId===t),O=w.length?(w.reduce((e,t)=>e+t.rating,0)/w.length).toFixed(1):null;return c.a.createElement("div",{className:"pizza-block"},c.a.createElement("img",{className:"pizza-block__image",src:n,alt:"Pizza"}),c.a.createElement("h4",{className:"pizza-block__title"},a),c.a.createElement("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8}},O?c.a.createElement("span",{style:{color:"#ff9800",fontWeight:600,fontSize:16}},"\u2605 ",O):c.a.createElement("span",{style:{color:"#bbb",fontSize:14}},"\u041d\u0435\u0442 \u043e\u0446\u0435\u043d\u043e\u043a"),c.a.createElement("button",{style:{background:"none",border:"none",color:"#ff9800",fontWeight:600,cursor:"pointer",fontSize:14,marginLeft:4,textDecoration:"underline"},onClick:()=>h(!0)},"\u041e\u0442\u0437\u044b\u0432\u044b (",w.length,")")),c.a.createElement("div",{className:"pizza-block__selector"},c.a.createElement("ul",null,p.map((e,t)=>c.a.createElement("li",{key:e,onClick:()=>(e=>{g(e)})(t),className:L()({active:E===t,disabled:!o.includes(t)})},e))),c.a.createElement("ul",null,u.map((e,t)=>c.a.createElement("li",{key:e,onClick:()=>(e=>{y(e)})(t),className:L()({active:b===t,disabled:!l.includes(e)})},e," \u0441\u043c.")))),c.a.createElement("div",{className:"pizza-block__bottom"},c.a.createElement("div",{className:"pizza-block__price"},"\u043e\u0442 ",r," \u20bd"),c.a.createElement(R,{onClick:()=>{const e={id:t,name:a,imageUrl:n,price:r,size:u[b],type:p[E]};s(e)},className:"button--add",outline:!0},c.a.createElement("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},c.a.createElement("path",{d:"M10.8 4.8H7.2V1.2C7.2 0.5373 6.6627 0 6 0C5.3373 0 4.8 0.5373 4.8 1.2V4.8H1.2C0.5373 4.8 0 5.3373 0 6C0 6.6627 0.5373 7.2 1.2 7.2H4.8V10.8C4.8 11.4627 5.3373 12 6 12C6.6627 12 7.2 11.4627 7.2 10.8V7.2H10.8C11.4627 7.2 12 6.6627 12 6C12 5.3373 11.4627 4.8 10.8 4.8Z",fill:"white"})),c.a.createElement("span",null,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),m&&c.a.createElement("i",null,m))),c.a.createElement(K,{isOpen:f,onClose:()=>h(!1),onSubmit:e=>{let{rating:n,comment:c}=e;var r;v((r={pizzaId:t,pizzaName:a,rating:n,comment:c},async e=>{try{const t=Object(d.a)(Object(d.a)({},r),{},{id:Date.now().toString(),date:(new Date).toISOString()});await V.a.post(U,t),e({type:"ADD_REVIEW",payload:t})}catch(t){console.error("Error adding review:",t)}}))},pizzaName:a,reviews:w}),f&&c.a.createElement("div",{style:{marginTop:16}},c.a.createElement("h5",{style:{color:"#ff9800",margin:"8px 0 4px 0"}},"\u041e\u0442\u0437\u044b\u0432\u044b:"),0===w.length?c.a.createElement("div",{style:{color:"#999",fontSize:14}},"\u041f\u043e\u043a\u0430 \u043d\u0435\u0442 \u043e\u0442\u0437\u044b\u0432\u043e\u0432"):c.a.createElement("div",{style:{display:"flex",flexDirection:"column",gap:10}},w.map((e,t)=>c.a.createElement("div",{key:e.id||t,style:{background:"#faf8f6",borderRadius:8,padding:10}},c.a.createElement("div",{style:{color:"#ffc107",fontWeight:600,fontSize:15}},"\u2605 ",e.rating),c.a.createElement("div",{style:{color:"#333",fontSize:15,marginTop:2}},c.a.createElement("b",null,e.author||"\u0410\u043d\u043e\u043d\u0438\u043c",":")," ",e.comment),c.a.createElement("div",{style:{color:"#bbb",fontSize:12,marginTop:4}},e.date&&new Date(e.date).toLocaleString("ru-RU")))))))}Y.defaultProps={name:"---",price:0,types:[],sizes:[]};var J=Y,q=a(32);var F=function(){return c.a.createElement(q.a,{className:"pizza-block",speed:2,width:280,height:460,viewBox:"0 0 280 460",backgroundColor:"#f3f3f3",foregroundColor:"#ecebeb"},c.a.createElement("circle",{cx:"132",cy:"142",r:"115"}),c.a.createElement("rect",{x:"0",y:"273",rx:"6",ry:"6",width:"280",height:"26"}),c.a.createElement("rect",{x:"0",y:"310",rx:"6",ry:"6",width:"280",height:"84"}),c.a.createElement("rect",{x:"0",y:"418",rx:"6",ry:"6",width:"91",height:"31"}),c.a.createElement("rect",{x:"137",y:"408",rx:"25",ry:"25",width:"140",height:"46"}))};var G=function(e){let{value:t,onChange:a}=e;return c.a.createElement("div",{style:{display:"flex",alignItems:"center",background:"#f3f3f3",borderRadius:30,padding:"6px 16px",minWidth:200}},c.a.createElement("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{marginRight:8}},c.a.createElement("path",{d:"M11.7666 11.7666L16 16",stroke:"#b6b6b6",strokeWidth:"2",strokeLinecap:"round"}),c.a.createElement("circle",{cx:"8",cy:"8",r:"7",stroke:"#b6b6b6",strokeWidth:"2"})),c.a.createElement("input",{type:"text",placeholder:"\u041f\u043e\u0438\u0441\u043a \u043f\u0438\u0446\u0446\u044b...",value:t,onChange:e=>a(e.target.value),style:{border:"none",outline:"none",background:"transparent",fontSize:16,width:"100%"}}))};var X=function(e){let{direction:t,onChange:a}=e;const n="asc"===t;return c.a.createElement("button",{type:"button",onClick:()=>a(n?"desc":"asc"),style:{background:"none",border:"none",cursor:"pointer",marginLeft:8,padding:0,display:"flex",alignItems:"center"},title:n?"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e \u0443\u0431\u044b\u0432\u0430\u043d\u0438\u044e":"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e \u0432\u043e\u0437\u0440\u0430\u0441\u0442\u0430\u043d\u0438\u044e"},c.a.createElement("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:n?"rotate(180deg)":"none",transition:"transform 0.2s"}},c.a.createElement("path",{d:"M6 9L9 12L12 9",stroke:"#fe5f1e",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})))};const Q=c.a.memo((function(e){let{items:t,activeSortType:a,onClickSortType:n}=e;const[r,o]=c.a.useState(!1),l=c.a.useRef(),i=t.find(e=>e.type===a).name,s=e=>{(e.path||e.composedPath&&e.composedPath()).includes(l.current)||o(!1)};return c.a.useEffect(()=>{document.body.addEventListener("click",s)},[]),c.a.createElement("div",{ref:l,className:"sort"},c.a.createElement("div",{className:"sort__label"},c.a.createElement("svg",{className:r?"rotated":"",width:"10",height:"6",viewBox:"0 0 10 6",fill:"none",xmlns:"http://www.w3.org/2000/svg"},c.a.createElement("path",{d:"M10 5C10 5.16927 9.93815 5.31576 9.81445 5.43945C9.69075 5.56315 9.54427 5.625 9.375 5.625H0.625C0.455729 5.625 0.309245 5.56315 0.185547 5.43945C0.061849 5.31576 0 5.16927 0 5C0 4.83073 0.061849 4.68424 0.185547 4.56055L4.56055 0.185547C4.68424 0.061849 4.83073 0 5 0C5.16927 0 5.31576 0.061849 5.43945 0.185547L9.81445 4.56055C9.93815 4.68424 10 4.83073 10 5Z",fill:"#2C2C2C"})),c.a.createElement("b",null,"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0430 \u043f\u043e:"),c.a.createElement("span",{onClick:()=>{o(!r)}},i)),r&&c.a.createElement("div",{className:"sort__popup"},c.a.createElement("ul",null,t&&t.map((e,t)=>c.a.createElement("li",{onClick:()=>(e=>{n&&n(e),o(!1)})(e),className:a===e.type?"active":"",key:"".concat(e.type,"_").concat(t)},e.name)))))}));Q.defaultProps={items:[]};var $=Q;a(64);var ee=e=>{let{message:t,type:a="success",onClose:r,visible:o}=e;return Object(n.useEffect)(()=>{if(o){const e=setTimeout(r,3e3);return()=>clearTimeout(e)}},[o,r]),c.a.createElement("div",{className:"notification notification--".concat(a," ").concat(o?"notification--visible":"")},t)};const te=e=>{let{type:t,order:a}=e;return{type:"SET_SORT_BY",payload:{type:t,order:a}}},ae=V.a.create({baseURL:"https://680743a9e81df7060eb96fec.mockapi.io/"}),ne=e=>({type:"SET_PIZZAS",payload:e}),ce=["\u041c\u044f\u0441\u043d\u044b\u0435","\u0412\u0435\u0433\u0435\u0442\u0430\u0440\u0438\u0430\u043d\u0441\u043a\u0430\u044f","\u0413\u0440\u0438\u043b\u044c","\u041e\u0441\u0442\u0440\u044b\u0435","\u0417\u0430\u043a\u0440\u044b\u0442\u044b\u0435"],re=[{name:"\u043f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u043e\u0441\u0442\u0438",type:"rating",order:"desc"},{name:"\u0446\u0435\u043d\u0435",type:"price",order:"desc"},{name:"\u0430\u043b\u0444\u0430\u0432\u0438\u0442",type:"name",order:"asc"}];var oe=function(){const e=Object(i.b)(),t=Object(i.c)(e=>{let{pizzas:t}=e;return t.items}),a=Object(i.c)(e=>{let{cart:t}=e;return t.items}),n=Object(i.c)(e=>{let{pizzas:t}=e;return t.isLoaded}),{category:r,sortBy:o}=Object(i.c)(e=>{let{filters:t}=e;return t}),[l,s]=c.a.useState("");c.a.useEffect(()=>{e(((e,t,a)=>n=>{n({type:"SET_LOADED",payload:!1});let c=[];a&&a.trim()?c=["search=".concat(encodeURIComponent(a.trim()))]:(void 0!==t&&null!==t&&c.push("category=".concat(t)),(null===e||void 0===e?void 0:e.type)&&(c.push("sortBy=".concat(e.type)),c.push("order=".concat(e.order))));const r=c.length?"?".concat(c.join("&")):"",o="/pizzas".concat(r);ae.get(o).then(e=>{let{data:t}=e;n(ne(t))})})(o,r,l))},[r,o,l,e]);const m=c.a.useCallback(t=>{e({type:"SET_CATEGORY",payload:t})},[e]),p=c.a.useCallback(t=>{e(te(t))},[e]),u=c.a.useCallback(t=>{e(te(Object(d.a)(Object(d.a)({},o),{},{order:t})))},[e,o]),E=t=>{var a;e((a=t,async e=>{const t=W(a);e({type:"ADD_PIZZA_CART",payload:Object(d.a)(Object(d.a)({},a),{},{cartKey:t})});try{const{data:e}=await V.a.get("".concat(I,"?cartKey=").concat(t));e.length>0?await V.a.put("".concat(I,"/").concat(e[0].id),Object(d.a)(Object(d.a)({},e[0]),{},{count:e[0].count+1})):await V.a.post(I,Object(d.a)(Object(d.a)({},a),{},{cartKey:t,pizzaId:a.id,count:1}))}catch(n){if(!n.response||404!==n.response.status)throw n;await V.a.post(I,Object(d.a)(Object(d.a)({},a),{},{cartKey:t,pizzaId:a.id,count:1}))}}))};return c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"content__top"},c.a.createElement(T,{activeCategory:r,onClickCategory:m,items:ce}),c.a.createElement("div",{style:{display:"flex",alignItems:"center"}},c.a.createElement($,{activeSortType:o.type,items:re,onClickSortType:p}),c.a.createElement(X,{direction:o.order,onChange:u}))),c.a.createElement("h2",{className:"content__title",style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},c.a.createElement("span",null,"\u0412\u0441\u0435 \u043f\u0438\u0446\u0446\u044b"),c.a.createElement(G,{value:l,onChange:s})),c.a.createElement("div",{className:"content__items"},n?t.map(e=>c.a.createElement(J,Object.assign({onClickAddPizza:E,key:e.id,addedCount:a[e.id]&&a[e.id].items.length},e))):Array(12).fill(0).map((e,t)=>c.a.createElement(F,{key:t}))))},le=a(33),ie=a.n(le);const se="https://686750c9e3fefb261ede4439.mockapi.io/db2/promo";var me=function(){const e=Object(i.b)(),{totalPrice:t,totalCount:a,items:n}=Object(i.c)(e=>{let{cart:t}=e;return t}),r=Object(i.c)(e=>{var t;return(null===(t=e.promocodes)||void 0===t?void 0:t.appliedPromocode)||null}),[o,s]=c.a.useState(""),[m,p]=c.a.useState(""),u=Object.entries(n).map(e=>{let[t,a]=e;return Object(d.a)(Object(d.a)({},a.items[0]),{},{cartKey:t,totalPrice:a.totalPrice,totalCount:a.items.length})});c.a.useEffect(()=>{(async()=>{if(r&&r.id)try{const{data:t}=await V.a.get("https://686750c9e3fefb261ede4439.mockapi.io/db2/promo/".concat(r.id));t&&t.code===r.code||e({type:"REMOVE_PROMOCODE"})}catch(t){e({type:"REMOVE_PROMOCODE"})}})()},[]);const E=t=>{window.confirm("\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c?")&&e((e=>async t=>{const a=W(e);t({type:"REMOVE_CART_ITEM",payload:a});const{data:n}=await V.a.get("".concat(I,"?cartKey=").concat(a));n.length>0&&await V.a.delete("".concat(I,"/").concat(n[0].id))})(t))},g=t=>{e((e=>async t=>{const a=W(e);t({type:"PLUS_CART_ITEM",payload:a});const{data:n}=await V.a.get("".concat(I,"?cartKey=").concat(a));n.length>0&&await V.a.put("".concat(I,"/").concat(n[0].id),Object(d.a)(Object(d.a)({},n[0]),{},{count:n[0].count+1}))})(t))},b=t=>{e((e=>async t=>{const a=W(e);t({type:"MINUS_CART_ITEM",payload:a});const{data:n}=await V.a.get("".concat(I,"?cartKey=").concat(a));n.length>0&&(n[0].count>1?await V.a.put("".concat(I,"/").concat(n[0].id),Object(d.a)(Object(d.a)({},n[0]),{},{count:n[0].count-1})):await V.a.delete("".concat(I,"/").concat(n[0].id)))})(t))},y=r?Math.round(t*r.discount/100):0,f=t-y;return c.a.createElement("div",{className:"container container--cart"},a?c.a.createElement("div",{className:"cart"},c.a.createElement("div",{className:"cart__top"},c.a.createElement("h2",{className:"content__title"},c.a.createElement("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},c.a.createElement("path",{d:"M6.33333 16.3333C7.06971 16.3333 7.66667 15.7364 7.66667 15C7.66667 14.2636 7.06971 13.6667 6.33333 13.6667C5.59695 13.6667 5 14.2636 5 15C5 15.7364 5.59695 16.3333 6.33333 16.3333Z",stroke:"white",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"}),c.a.createElement("path",{d:"M14.3333 16.3333C15.0697 16.3333 15.6667 15.7364 15.6667 15C15.6667 14.2636 15.0697 13.6667 14.3333 13.6667C13.597 13.6667 13 14.2636 13 15C13 15.7364 13.597 16.3333 14.3333 16.3333Z",stroke:"white",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"}),c.a.createElement("path",{d:"M4.78002 4.99999H16.3334L15.2134 10.5933C15.1524 10.9003 14.9854 11.176 14.7417 11.3722C14.4979 11.5684 14.1929 11.6727 13.88 11.6667H6.83335C6.50781 11.6694 6.1925 11.553 5.94689 11.3393C5.70128 11.1256 5.54233 10.8295 5.50002 10.5067L4.48669 2.82666C4.44466 2.50615 4.28764 2.21182 4.04482 1.99844C3.80201 1.78505 3.48994 1.66715 3.16669 1.66666H1.66669",stroke:"white",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"})),"\u041a\u043e\u0440\u0437\u0438\u043d\u0430"),c.a.createElement("div",{className:"cart__clear"},c.a.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},c.a.createElement("path",{d:"M2.5 5H4.16667H17.5",stroke:"#B6B6B6",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"}),c.a.createElement("path",{d:"M6.66663 5.00001V3.33334C6.66663 2.89131 6.84222 2.46739 7.15478 2.15483C7.46734 1.84227 7.89127 1.66667 8.33329 1.66667H11.6666C12.1087 1.66667 12.5326 1.84227 12.8451 2.15483C13.1577 2.46739 13.3333 2.89131 13.3333 3.33334V5.00001M15.8333 5.00001V16.6667C15.8333 17.1087 15.6577 17.5326 15.3451 17.8452C15.0326 18.1577 14.6087 18.3333 14.1666 18.3333H5.83329C5.39127 18.3333 4.96734 18.1577 4.65478 17.8452C4.34222 17.5326 4.16663 17.1087 4.16663 16.6667V5.00001H15.8333Z",stroke:"#B6B6B6",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"}),c.a.createElement("path",{d:"M8.33337 9.16667V14.1667",stroke:"#B6B6B6",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"}),c.a.createElement("path",{d:"M11.6666 9.16667V14.1667",stroke:"#B6B6B6",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"})),c.a.createElement("span",{onClick:()=>{window.confirm("\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u043a\u043e\u0440\u0437\u0438\u043d\u0443?")&&(e(Z()),e({type:"REMOVE_PROMOCODE"}))}},"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u043a\u043e\u0440\u0437\u0438\u043d\u0443"))),c.a.createElement("div",{className:"content__items"},u.map(e=>c.a.createElement(P,{key:e.cartKey,id:e.id,name:e.name,type:e.type,size:e.size,totalPrice:e.totalPrice,totalCount:e.totalCount,cartKey:e.cartKey,imageUrl:e.imageUrl,onRemove:()=>E(e),onMinus:()=>b(e),onPlus:()=>g(e)}))),c.a.createElement("div",{className:"cart__bottom"},c.a.createElement("form",{onSubmit:t=>{t.preventDefault();const a=e((n=o,async e=>{const a=n.toUpperCase();try{const{data:t}=await V.a.get("".concat(se,"?code=").concat(a));if(t.length>0){const a=t[0];return e({type:"APPLY_PROMOCODE",payload:{code:a.code,discount:Number(a.discount),description:a.description,id:a.id}}),{success:!0,message:"\u041f\u0440\u043e\u043c\u043e\u043a\u043e\u0434 \u043f\u0440\u0438\u043c\u0435\u043d\u0451\u043d! ".concat(a.description)}}return{success:!1,message:"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0438\u043b\u0438 \u0443\u0436\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u043f\u0440\u043e\u043c\u043e\u043a\u043e\u0434"}}catch(t){return{success:!1,message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438 \u043f\u0440\u043e\u043c\u043e\u043a\u043e\u0434\u0430"}}}));var n;p(a.message),s("")},style:{display:"flex",alignItems:"center",gap:12,marginBottom:18}},c.a.createElement("input",{type:"text",value:o,onChange:e=>s(e.target.value),placeholder:"\u041f\u0440\u043e\u043c\u043e\u043a\u043e\u0434",style:{padding:"10px 16px",borderRadius:8,border:"1px solid #eee",fontSize:16,outline:"none",background:"#faf8f6",width:180},disabled:!!r}),r?c.a.createElement("button",{type:"button",className:"button button--black",style:{fontSize:16},onClick:()=>{e({type:"REMOVE_PROMOCODE"}),p("\u041f\u0440\u043e\u043c\u043e\u043a\u043e\u0434 \u0443\u0434\u0430\u043b\u0451\u043d")}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"):c.a.createElement("button",{type:"submit",className:"button button--cart",style:{fontSize:16}},"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c"),m&&c.a.createElement("span",{style:{color:r?"#4caf50":"#e53935",fontWeight:500,marginLeft:8}},m),r&&c.a.createElement("span",{style:{color:"#ff9800",fontWeight:600,marginLeft:8}},r.code,": ",r.description)),c.a.createElement("div",{className:"cart__bottom-details"},c.a.createElement("span",null,"\u0412\u0441\u0435\u0433\u043e \u043f\u0438\u0446\u0446: ",c.a.createElement("b",null,a," \u0448\u0442.")),c.a.createElement("span",null,"\u0421\u0443\u043c\u043c\u0430 \u0437\u0430\u043a\u0430\u0437\u0430: ",c.a.createElement("b",null,t," \u20bd")),r&&c.a.createElement("span",{style:{color:"#4caf50",fontWeight:600}},"\u0421\u043a\u0438\u0434\u043a\u0430: -",y," \u20bd"),r&&c.a.createElement("span",{style:{color:"#ff9800",fontWeight:600}},"\u041a \u043e\u043f\u043b\u0430\u0442\u0435: ",c.a.createElement("b",null,f," \u20bd"))),c.a.createElement("div",{className:"cart__bottom-buttons"},c.a.createElement(l.b,{to:"/",className:"button button--outline button--add go-back-btn"},c.a.createElement("svg",{width:"8",height:"14",viewBox:"0 0 8 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},c.a.createElement("path",{d:"M7 13L1 6.93015L6.86175 1",stroke:"#D3D3D3",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})),c.a.createElement("span",null,"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430\u0437\u0430\u0434")),c.a.createElement(l.b,{to:"/order",className:"button pay-btn"},c.a.createElement("span",null,"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"))))):c.a.createElement("div",{className:"cart cart--empty"},c.a.createElement("h2",null,"\u041a\u043e\u0440\u0437\u0438\u043d\u0430 \u043f\u0443\u0441\u0442\u0430\u044f ",c.a.createElement("i",null,"\ud83d\ude15")),c.a.createElement("p",null,"\u0412\u0435\u0440\u043e\u044f\u0442\u043d\u0435\u0439 \u0432\u0441\u0435\u0433\u043e, \u0432\u044b \u043d\u0435 \u0437\u0430\u043a\u0430\u0437\u044b\u0432\u0430\u043b\u0438 \u0435\u0449\u0451 \u043f\u0438\u0446\u0446\u0443.",c.a.createElement("br",null),"\u0414\u043b\u044f \u0442\u043e\u0433\u043e, \u0447\u0442\u043e\u0431\u044b \u0437\u0430\u043a\u0430\u0437\u0430\u0442\u044c \u043f\u0438\u0446\u0446\u0443, \u043f\u0435\u0440\u0435\u0439\u0434\u0438 \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443."),c.a.createElement("img",{src:ie.a,alt:"Empty cart"}),c.a.createElement(l.b,{to:"/",className:"button button--black"},c.a.createElement("span",null,"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430\u0437\u0430\u0434"))))};const de="https://686750c9e3fefb261ede4439.mockapi.io/db2/orders",pe={padding:"14px 18px",borderRadius:8,border:"1px solid #eee",fontSize:17,outline:"none",marginBottom:0,background:"#faf8f6",transition:"border 0.2s"};var ue=e=>{let{showNotification:t}=e;const a=Object(i.b)(),r=Object(z.e)(),[o,l]=Object(n.useState)({name:"",phone:"",address:""}),[s,m]=Object(n.useState)(!1),p=Object(i.c)(e=>e.cart.totalPrice),u=(Object(i.c)(e=>e.cart.items),Object(i.c)(e=>{var t;return null===(t=e.promocodes)||void 0===t?void 0:t.appliedPromocode})),E=e=>{l(Object(d.a)(Object(d.a)({},o),{},{[e.target.name]:e.target.value}))};return c.a.createElement("div",{className:"container",style:{maxWidth:420,margin:"40px auto"}},c.a.createElement("div",{style:{background:"#fff",borderRadius:18,boxShadow:"0 8px 32px rgba(0,0,0,0.10)",padding:32,marginTop:32,display:"flex",flexDirection:"column",alignItems:"center"}},c.a.createElement("h2",{style:{marginBottom:24,color:"#ff9800",fontWeight:700}},"\u041e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u0438\u0435 \u0437\u0430\u043a\u0430\u0437\u0430"),c.a.createElement("form",{onSubmit:async e=>{e.preventDefault(),m(!0),await new Promise(e=>setTimeout(e,1800)),m(!1);if(Math.random()>.1){const l=S.getState().cart.items;if(!l||0===Object.keys(l).length)return void t("\u041a\u043e\u0440\u0437\u0438\u043d\u0430 \u043f\u0443\u0441\u0442\u0430, \u0437\u0430\u043a\u0430\u0437 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d.","error");a((c={name:o.name,phone:o.phone,address:o.address,totalPrice:p,items:l,promocode:u||null},async e=>{try{const t=Object(d.a)(Object(d.a)({},c),{},{date:(new Date).toISOString(),status:"completed",id:Date.now().toString()});await V.a.post(de,t),e({type:"ADD_ORDER",payload:t});const a=JSON.parse(localStorage.getItem("orders")||"[]");localStorage.setItem("orders",JSON.stringify([t,...a]))}catch(t){console.error("Error saving order:",t)}})),a(Z()),u&&u.id&&a((n=u.id,async t=>{try{await V.a.delete("".concat(se,"/").concat(n)),t({type:"REMOVE_PROMOCODE"})}catch(e){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u043f\u0440\u043e\u043c\u043e\u043a\u043e\u0434\u0430 \u0438\u0437 \u0411\u0414:",e)}})),t("\u041e\u043f\u043b\u0430\u0442\u0430 \u043f\u0440\u043e\u0448\u043b\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e! \u0421\u043f\u0430\u0441\u0438\u0431\u043e \u0437\u0430 \u0437\u0430\u043a\u0430\u0437!","success"),r.push("/")}else t("\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u043f\u043b\u0430\u0442\u044b. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437.","error");var n,c},style:{width:"100%",display:"flex",flexDirection:"column",gap:18}},c.a.createElement("input",{name:"name",value:o.name,onChange:E,placeholder:"\u0418\u043c\u044f",required:!0,style:pe}),c.a.createElement("input",{name:"phone",value:o.phone,onChange:E,placeholder:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d",required:!0,style:pe}),c.a.createElement("input",{name:"address",value:o.address,onChange:E,placeholder:"\u0410\u0434\u0440\u0435\u0441 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438",required:!0,style:pe}),c.a.createElement("button",{type:"submit",className:"button button--cart",disabled:s||0===p,style:{fontSize:20,marginTop:8}},s?"\u041e\u043f\u043b\u0430\u0442\u0430...":"\u041e\u043f\u043b\u0430\u0442\u0438\u0442\u044c ".concat(p," \u20bd")))))};var Ee=()=>{const e=Object(i.b)(),{orders:t}=Object(i.c)(e=>{let{orders:t}=e;return t});Object(n.useEffect)(()=>{e(e=>{e({type:"SET_ORDERS",payload:JSON.parse(localStorage.getItem("orders")||"[]")})})},[e]);const a=e=>{switch(e){case"completed":return"#4caf50";case"pending":return"#ff9800";default:return"#757575"}};return c.a.createElement("div",{className:"container",style:{maxWidth:800,margin:"40px auto"}},c.a.createElement("h2",{style:{textAlign:"center",color:"#ff9800",marginBottom:32,fontSize:32,fontWeight:700}},"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"),0===t.length?c.a.createElement("div",{style:{textAlign:"center",padding:60,background:"#fff",borderRadius:18,boxShadow:"0 4px 20px rgba(0,0,0,0.08)"}},c.a.createElement("h3",{style:{color:"#757575",marginBottom:16}},"\u0417\u0430\u043a\u0430\u0437\u043e\u0432 \u043f\u043e\u043a\u0430 \u043d\u0435\u0442"),c.a.createElement("p",{style:{color:"#999"}},"\u0421\u0434\u0435\u043b\u0430\u0439\u0442\u0435 \u043f\u0435\u0440\u0432\u044b\u0439 \u0437\u0430\u043a\u0430\u0437, \u0447\u0442\u043e\u0431\u044b \u0443\u0432\u0438\u0434\u0435\u0442\u044c \u0435\u0433\u043e \u0437\u0434\u0435\u0441\u044c")):c.a.createElement("div",{style:{display:"flex",flexDirection:"column",gap:20}},t.filter(e=>e&&e.id&&e.items&&Object.keys(e.items).length>0).map(e=>{return c.a.createElement("div",{key:e.id,style:{background:"#fff",borderRadius:16,padding:24,boxShadow:"0 4px 20px rgba(0,0,0,0.08)",border:"1px solid #f0f0f0"}},c.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16,paddingBottom:16,borderBottom:"1px solid #f0f0f0"}},c.a.createElement("div",null,c.a.createElement("h3",{style:{margin:0,color:"#333",fontSize:18}},"\u0417\u0430\u043a\u0430\u0437 #","string"===typeof e.id?e.id.slice(-6):e.id),c.a.createElement("p",{style:{margin:"4px 0 0 0",color:"#666",fontSize:14}},(t=e.date,new Date(t).toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})))),c.a.createElement("div",{style:{textAlign:"right"}},c.a.createElement("div",{style:{padding:"6px 12px",borderRadius:20,background:a(e.status),color:"#fff",fontSize:12,fontWeight:600}},(e=>{switch(e){case"completed":return"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d";case"pending":return"\u0412 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0435";default:return e}})(e.status)),c.a.createElement("p",{style:{margin:"8px 0 0 0",color:"#ff9800",fontSize:18,fontWeight:700}},e.totalPrice," \u20bd"))),c.a.createElement("div",null,c.a.createElement("h4",{style:{margin:"0 0 12px 0",color:"#333",fontSize:16}},"\u0421\u043e\u0441\u0442\u0430\u0432 \u0437\u0430\u043a\u0430\u0437\u0430:"),c.a.createElement("div",{style:{display:"flex",flexDirection:"column",gap:8}},e.items&&Object.entries(e.items).map(e=>{let[t,a]=e;return c.a.createElement("div",{key:t,style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 12px",background:"#faf8f6",borderRadius:8}},c.a.createElement("div",null,c.a.createElement("p",{style:{margin:0,color:"#333",fontWeight:500}},a.items&&a.items[0]?a.items[0].name:"\u041f\u0438\u0446\u0446\u0430"),c.a.createElement("p",{style:{margin:"2px 0 0 0",color:"#666",fontSize:12}},a.items&&a.items[0]?"".concat(a.items[0].size," \u0441\u043c, ").concat(a.items[0].type," \u0442\u0435\u0441\u0442\u043e"):"")),c.a.createElement("div",{style:{textAlign:"right"}},c.a.createElement("p",{style:{margin:0,color:"#ff9800",fontWeight:600}},a.items?a.items.length:0," \u0448\u0442."),c.a.createElement("p",{style:{margin:"2px 0 0 0",color:"#666",fontSize:12}},a.totalPrice||0," \u20bd")))}))));var t})))};var ge=function(){const[e,t]=Object(n.useState)({message:"",type:"success",visible:!1}),a=Object(n.useCallback)((function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";t({message:e,type:a,visible:!0})}),[]),r=Object(n.useCallback)(()=>{t(e=>Object(d.a)(Object(d.a)({},e),{},{visible:!1}))},[]);return c.a.createElement("div",{className:"wrapper"},c.a.createElement(H,null),c.a.createElement(ee,{message:e.message,type:e.type,visible:e.visible,onClose:r}),c.a.createElement("div",{className:"content"},c.a.createElement(z.a,{path:"/",component:oe,exact:!0}),c.a.createElement(z.a,{path:"/cart",component:me,exact:!0}),c.a.createElement(z.a,{path:"/orders",component:Ee,exact:!0}),c.a.createElement(z.a,{path:"/order",render:()=>c.a.createElement(ue,{showNotification:a}),exact:!0})))};o.a.render(c.a.createElement(l.a,null,c.a.createElement(i.a,{store:S},c.a.createElement(ge,null))),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.674d5157.chunk.js.map